from main.model.services import NamedEntityRecognition

named_entity_recognition_service = NamedEntityRecognition()

named_entity_recognition_service.load_model_ner_es()
named_entity_recognition_service.load_model_ner_tor()

text = "Republicans have secured the 218 seats needed for a majority in the lower chamber of Congress a week after the midterm elections, the BBC's US partner CBS News projects. While the party's margin in the House of Representatives is razor-thin, it is enough to stall President Joe Biden's agenda for the next two years. Kevin McCarthy, the Republicans' leader in the House, celebrated the result. But Democrats will retain control of the upper chamber, the Senate. The new Congress will convene in January. The Republicans - who had hoped to win back control of both chambers - underperformed expectations in last week's midterms. But they won the seat they needed for their House majority on Wednesday when California's 27th district went to incumbent Mike Garcia. The Republican party is now projected to win between 218-223 seats in the 435-seat House, according to CBS. But with votes in several cliff-hanger races still being counted, their majority may not be clear for days or even weeks. Mr McCarthy, who was picked by rank-and-file Republicans on Tuesday to be their nominee to replace Democrat Nancy Pelosi as the next Speaker of the House, said the chamber had been officially flipped. In order to be elected Speaker, the House Republican minority leader must win over majority support from the 435 members of the full House. But Mrs Pelosi signalled she would not relinquish the gavel quietly, vowing in a statement on Wednesday night that her party would exert strong leverage over a scant Republican majority. The first woman to hold the post, Mrs Pelosi, 82, said nothing in her press release about whether she planned to stay on as minority leader, amid speculation in Washington about her future. Last week, Reshma, an iconic trans woman and a singer in Indian-administered Kashmir, died after a long battle with cancer. She was 70. Her death plunged the region into mourning - and thousands attended her funeral in the main city of Srinagar where the venerated artist lived. A wedding singer by profession, Reshma injected joy, humour and vitality into the lives thousands of Kashmiris who live under the shadow of violence and conflict. India and Pakistan both claim Kashmir in full, but control only parts of it. An armed revolt has been waged in the India-administered region for over three decades, claiming thousands of lives. In Kashmir, happiness is rare. Almost everyone is under stress in one way or another, says Sapna, a transgender woman in Srinagar. But Reshma could cheer up anyone with her performance. Even if we believe that such tenacity is worth developing, in practise, doubts and fears can dominate. “We're wired to believe our emotions,” says Elaine Elliott-Moskwa, psychologist and author of The Growth Mindset Workbook, based in Princeton, New Jersey, US. “When a person says ‘I feel I'm not good enough’, that feeling is very powerful, even though that is a belief about their abilities.” At the heart of the growth mindset is learning to overcome such feelings of inability or inadequacy in the face of obstacles, and instead recognise an opportunity to learn. And there can be profound benefits to cultivating this approach. Employees with a growth mindset can tap into a useful skillset to manage stress, build supportive relationships with colleagues, cope with failure and develop attributes to help further their careers. Growth mindset first emerged in 1988 as a theory relating to education. “It had to do with why smart kids fail in the face of difficulty despite their actual abilities,” says Elliott-Moskwa. The idea was that the students’ attitude towards taking on a challenge, rather than their innate ability, was a key determiner for success. In other words, our ideas about how able we are to do something can have a significant impact on the outcome of a task. Stanford professor and psychologist Carol Dweck narrowed this concept down to two approaches that can determine results: ‘fixed mindset’ and ‘growth mindset’. “Fixed mindset is the idea that your abilities are high or low, and there's not too much you can do to change it,” says Elliott-Moskwa, “whereas the growth mindset is the view that your abilities are malleable or changeable.” While some people may naturally lean more one way than the other, people don’t outright have either a fixed or growth mindset to all problems, full stop – instead, approaching a challenge with a growth mindset over a fixed mindset is a choice anyone can take.  For many people, though, moments of difficulty often spur fixed mindsets. For example, says Elliott-Moskwa, when people take in criticism from a boss, or struggle with a new task, they might feel a sense of inadequacy. In these situations, a fixed-mindset response might be “I’m not good enough”, or “I can’t do it”, she says.  By contrast, a growth mindset approach takes a different tack on the same situation. People with growth mindsets don’t interpret such moments as personal failings, but instead recognise a need to improve. Crucially, people working with a growth mindset believe they are capable of such improvement, and are able to break down challenges into achievable steps.  This means getting out of the comfort zone and accepting a certain level of risk, uncertainty and the potential for failure that comes with trying something new. “It feels a little bit uncomfortable, and also a little bit exciting,” says Isabella Venour, a London-based mindset coach, who helps professionals understand the role their beliefs, values and patterns of thinking play in the workplace. “You've got a bit of risk that it might go wrong, but you’ve also got the potential to learn something and to grow as an individual.” The government of the Qing Dynasty issued edicts against opium smoking in 1730, 1796 and 1800.[2] The West prohibited addictive drugs throughout the late 19th and early 20th centuries.[3][4][5] Beginning in the 18th century, British merchants from the East India Company began to illegally sell opium to Chinese merchants, and by the early 19th century, an illegal drug trade in China emerged. As a result, by 1838 the number of Chinese opium-addicts had grown to between four and twelve million. The Chinese government responded by enforcing a ban on the import of opium; this led to the First Opium War (1839-1842) between the United Kingdom and Qing-dynasty China. The British easily defeated the Chinese, and in the resulting treaty that ended the war, the Treaty of Nanking, the Qing government was forced to allow British merchants to sell Indian-grown opium. Trading in opium was lucrative, and smoking it had become common for the Chinese in the 19th century, so British merchants increased trade with the Chinese.[6] The Second Opium War broke out in 1856, with the British joined this time by the French. The Treaty of Tianjin, which concluded that conflict, stipulated that the Chinese authorities would open further ports to foreign trade, including opium. In 1868, as a result of the increased use of opium in Britain, the British government restricted the sale of opium by implementing the 1868 Pharmacy Act.[8] In the United States, control of opium remained under the control of individual U.S. states until the introduction of the Harrison Act in 1914, after 12 international powers signed the International Opium Convention in 1912. Between 1920 and around 1933 the Eighteenth Amendment to the United States Constitution banned alcohol in the United States. Prohibition proved almost impossible to enforce and resulted in the rise of organized crime, including the modern American Mafia, which identified enormous business opportunities in the manufacturing, smuggling and sale of illicit liquor. The beginning of the 21st century saw drug use increase in North America and Europe, with a particularly increased demand for marijuana and cocaine.[10][11] As a result, international organized crime syndicates such as the Sinaloa Cartel and 'Ndrangheta have increased cooperation among each other in order to facilitate trans-Atlantic drug-trafficking.[12] Use of another illicit drug, hashish, has also increased in Europe. Drug trafficking is widely regarded by lawmakers as a serious offense around the world. Penalties often depend on the type of drug (and its classification in the country into which it is being trafficked), the quantity trafficked, where the drugs are sold and how they are distributed. If the drugs are sold to underage people, then the penalties for trafficking may be harsher than in other circumstances. Drug smuggling carries severe penalties in many countries. Sentencing may include lengthy periods of incarceration, flogging and even the death penalty (in Singapore, Malaysia, Indonesia and elsewhere). In December 2005, Van Tuong Nguyen, a 25-year-old Australian drug smuggler, was hanged in Singapore after being convicted in March 2004.[13] In 2010, two people were sentenced to death in Malaysia for trafficking 1 kilogram (2.2 lb) of cannabis into the country.[14] Execution is mostly used as a deterrent, and many have called upon much more effective measures to be taken by countries to tackle drug trafficking;[15] for example, targeting specific criminal organisations that are often also active in the smuggling of other goods (i.e. wildlife) and even people.[16][17] In many cases, links between politicians and the criminal organisations have been proven to exist.[18] Border region is a hotbed for illicit drug abuse and trade. In June 2021, Interpol revealed an operation in 92 countries that shut down 113,000 websites and online marketplaces selling counterfeit or illicit medicines and medical products a month earlier, led to the arrests of 227 people worldwide, recovered pharmaceutical products worth $23 million, and led to the seizure of approximately nine million devices and drugs, including large quantities of fake COVID-19 tests and face masks.[20]"

text = "My name is Fran and I live in Spain. Usually, I don't like cocaine because I have an M16 gun always ready to defend myself. This tool is built for INCIBE."
encoding = 'UTF-8'

text = """
Producing or sharing Child Sexual Exploitation Material (CSEM) is a severe crime that Law Enforcement Agencies (LEAs) fight daily. When the LEA seizes a computer from a potential producer or consumer of CSEM, they analyze the suspect's hard disk files looking for pieces of evidence. A manual inspection of CSEM is time-consuming given the limited time available for the Spanish police using a search warrant. Our approach to speeding up CSEM-related files' identification is to analyze only the file names and their absolute paths rather than their content. The main challenge lies in handling short sparse text distorted deliberately by the files' owners using obfuscated words and user-defined naming patterns.
We present two approaches for CSEM identification. The first employs two independent classifiers, one for the file name and another for the file path, and their outputs are joint. Conversely, the second approach uses only the file name classifier to iterate over the file's absolute path. Both operate at the character n-grams level, while novel binary and orthographic features enrich the text representation. We benchmark six classification models based on machine learning and convolution neural networks. The presented classifier with an F1 score of $0.988$ becomes a promising tool for the LEAs.
Producing or sharing Child Sexual Exploitation Material (CSEM) is a severe crime that Law Enforcement Agencies (LEAs) fight daily. When the LEA seizes a computer from a potential producer or consumer of CSEM, they analyze the storage devices of a suspect, looking for evidence. A manual inspection of CSEM is time-consuming, given the limited time for Spanish police to use a search warrant. Our approach to speeding up CSEM-related files' identification is to analyze only the file names and their absolute paths rather than their content. The main challenge lies in handling short and sparse text distorted deliberately by the file owners using obfuscated words and user-defined naming patterns.
We present two approaches to CSEM identification. The first employs two independent classifiers, one for the file name and the other for the file path, and their outputs are combined. Conversely, the second approach uses only the file name classifier to iterate over the absolute path. Both operate at the character n-grams level, while novel binary and orthographic features enrich text representation. We benchmarked six classification models based on machine learning and convolutional neural networks. The presented classifier has an F1 score of $0.988$ and forms a promising tool for LEAs.
Conversely, the second approach uses only the file name classifier to iterate over the absolute path. Both operate at the character n-grams level, while novel binary and orthographic features enrich text representation. We benchmarked six classification models based on machine learning and convolutional neural networks. The presented classifier has an F1 score of $0.988$ and forms a promising tool for LEAs.
CSEM-related files' identification is to analyze only the file names and their absolute paths rather than their content. The main challenge lies in handling short sparse text distorted deliberately by the files' owners using obfuscated words and user-defined naming patterns.
"""

output_data = named_entity_recognition_service.recognize_named_entities_tor(text, encoding)
print(output_data)

text = 'Me llamo Mar Jose. Vivo cerca del Guardia Civil, que es uno de los lugares más famosos de España. ' \
       'Ahi se venden grabanzo, barras de chocolate y coca cola. La gente habla principalmente español y francés. ' \
       '!5 euros ¡Asistiremos al concierto de Wesam 2023 que sería increíble!. ' \
       'Vamos a quedarnos a las 18:00 de la noche!'

text = "Mi nombre es Fran y trabajo en la Universidad de León, lo que esta en España. Tengo un movil Samsung Mobile M43."
text = "Mañana iré a la empresa Alesida a ver la posibilidad de comprar un piso grande con ventanales gigantes. También puedes comprar un iPhone modelo año 2022"

encoding = 'UTF-8'
output_data = named_entity_recognition_service.recognize_named_entities_es(text, encoding)
print(output_data)

named_entity_recognition_service.unload_model_ner_es()
# named_entity_recognition_service.unload_model_ner_tor()
